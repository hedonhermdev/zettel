<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git | HedonHermDev</title><meta name=keywords content><meta name=description content="HedonHermDev's Zettelkasten"><meta name=author content="Me"><link rel=canonical href=//hedonhermdev.github.io/zettel/git/><link crossorigin=anonymous href=/zettel/assets/css/stylesheet.min.9a63a5a4c1267737550ddba323e3be1e4e986f336f69599108679f89a39f8d94.css integrity="sha256-mmOlpMEmdzdVDdujI+O+Hk6YbzNvaVmRCGefiaOfjZQ=" rel="preload stylesheet" as=style><link rel=icon href=//hedonhermdev.github.io/zettel/img/profile.jpg><link rel=icon type=image/png sizes=16x16 href=//hedonhermdev.github.io/zettel/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=//hedonhermdev.github.io/zettel/img/profile.jpg><link rel=apple-touch-icon href=//hedonhermdev.github.io/zettel/img/profile.jpg><link rel=mask-icon href=//hedonhermdev.github.io/zettel/img/profile.jpg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.79.0"><link rel=alternate type=application/rss+xml href=//hedonhermdev.github.io/zettel/git/index.xml><script src=//unpkg.com/three></script><script src=//unpkg.com/three/examples/js/renderers/CSS2DRenderer.js></script><script src=//unpkg.com/3d-force-graph></script><script src=//unpkg.com/three-spritetext></script><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','G-DT32618Q01','auto');ga('send','pageview');}</script><meta property="og:title" content="Git"><meta property="og:description" content="HedonHermDev's Zettelkasten"><meta property="og:type" content="website"><meta property="og:url" content="//hedonhermdev.github.io/zettel/git/"><meta property="og:site_name" content="HedonHermDev's Zettelkasten"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git"><meta name=twitter:description content="HedonHermDev's Zettelkasten"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Git","item":"//hedonhermdev.github.io/zettel/git/"}]}</script></head><body class="list dark" id=top><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style></noscript><header class=header><nav class=nav><div class=logo><a href=//hedonhermdev.github.io/zettel/ accesskey=h title="HedonHermDev's Zettelkasten (Alt + H)">HedonHermDev's Zettelkasten</a>
<span class=logo-switches></span></div><ul id=menu onscroll=menu_on_scroll()></ul></nav></header><main class=main><header class=page-header><h1>Git</h1></header><article class=post-entry><header class=entry-header><h2>Error Handling in Rust</h2></header><section class=entry-content><p>Better Error Handling in Rust If you have written any Rust, you may have noted how the above code uses Result&lt;T> instead of Result&lt;T, E>. This is because we have used a crate called anyhow.rs. Consider this function:
pub fn write_blob(self) { let blob_path = self.get_path(); create_dir_all(blob_path.parent().unwrap()).unwrap(); let mut file = File::create(blob_path).unwrap(); file.write_all(&self.content).unwrap(); file.flush().unwrap(); } There are a number of ways this can fail. However, we don’t care a lot about the exact type of each error....</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Error Handling in Rust" href=//hedonhermdev.github.io/zettel/git/error-handling/></a></article><article class=post-entry><header class=entry-header><h2>Git CLI in Rust</h2></header><section class=entry-content><p>CLI Definition in Rust Writing CLIs in Rust is an absolute pleasure. Using a crate like structopt, you can define the structure of your CLI and it handles cleaning the input and converting it to an appropriate type.
#[derive(Debug, StructOpt)] #[structopt(name = "TGit", about = "HedonHermDev's implementation of Git")] pub enum CLI { #[structopt( name = "init", about = "Initialize an empty git repository")] Init { git_dir: Option&lt;PathBuf> }, #[structopt(name = "cat-file", about = "Cat the contents of a git object")] CatFile { #[structopt( name = "pretty_print", short = "p", about = "Pretty print the contents")] pretty_print: bool, #[structopt(name = "OBJECT SHA")] object_sha: String, }, // -- snip -- } impl CLI { pub async fn run() -> Result&lt;()> { let args: Self = Self::from_args(); match args { CLI::Init { git_dir } => commands::init(git_dir)....</p></section><footer class=entry-footer>2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Git CLI in Rust" href=//hedonhermdev.github.io/zettel/git/cli/></a></article><article class=post-entry><header class=entry-header><h2>Git Implementation in Rust</h2></header><section class=entry-content><p>Git Implementation in Rust Since all three types of objects have some common behaviour that only differs in its implementation, we can easily define a trait Object that defines each of these methods.
#[async_trait] pub trait Object { async fn from_object_sha(object_sha: String) -> Result&lt;Self> where Self: Sized; fn sha1_hash(&self) -> [u8; 20]; fn write_data(&self) -> &Vec&lt;u8>; async fn write(&self) -> Result&lt;PathBuf> { let mut path = PathBuf::from(".git/objects"); let blob_hex = hex::encode(self....</p></section><footer class=entry-footer>2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Git Implementation in Rust" href=//hedonhermdev.github.io/zettel/git/implementation/></a></article><article class=post-entry><header class=entry-header><h2>Internals of Git Object Storage</h2></header><section class=entry-content><p>Internals of Git Object Storage To understand the implementation further, you will need a rough idea of how Git stores its data. Here’s a brief introduction to the same. Everything about Git is stored inside a directory called the gitdir aka .git. Example contents of the .git directory Think of Git like a database. Git stores its data in the form of Objects. There are three types of Git objects: Blob, Tree, and Commit....</p></section><footer class=entry-footer>1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Internals of Git Object Storage" href=//hedonhermdev.github.io/zettel/git/internal-objects/></a></article><article class=post-entry><header class=entry-header><h2>Writing Git in Rust</h2></header><section class=entry-content><p>Writing Git in Rust Notes around the implementation of a small part of Git in Rust. Full implementation in this repository.
Note that most of the implementation’s details will be snipped. If you want to see the full implementation and try it out on your machine, check out the repository.
Structuring the Project The challenge proceeded in steps and each step was about implementing what they call “plumbing commands” of Git....</p></section><footer class=entry-footer>2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to Writing Git in Rust" href=//hedonhermdev.github.io/zettel/git/git-in-rust/></a></article></main><footer class=footer><span>&copy; 2021 <a href=//hedonhermdev.github.io/zettel/>HedonHermDev</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){if(localStorage.getItem("menu-scroll-position")){document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position");}}
function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft);}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script></body></html>